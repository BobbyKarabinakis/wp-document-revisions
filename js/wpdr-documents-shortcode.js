(function(a,b,c,d,e,f){const{registerBlockType:g,createBlock:h}=wp.blocks,{createElement:k}=wp.element,{InspectorControls:l}=wp.blockEditor,{PanelBody:m,RadioControl:n,RangeControl:o,TextControl:p,TextareaControl:q,ToggleControl:r}=wp.components,{__:s}=wp.i18n;g("wp-document-revisions/documents-shortcode",{title:s("Documents List","wp-document-revisions"),description:s("Display a list of documents.","wp-document-revisions"),category:"wpdr-category",icon:"editor-ul",attributes:{taxonomy_0:{type:"string",default:""},term_0:{type:"number",default:0},taxonomy_1:{type:"string",default:""},term_1:{type:"number",default:0},taxonomy_2:{type:"string",default:""},term_2:{type:"number",default:0},numberposts:{type:"number",default:5},orderby:{type:"string"},order:{type:"string",default:"ASC"},show_edit:{type:"string",default:""},new_tab:{type:"boolean",default:!0},freeform:{type:"string",default:""}},edit(a){function b(a){var b=e[a].terms,f=[];for(j=0,lenj=b.length;j<lenj;j++)f.push({value:b[j][0],label:b[j][1]});return 0==a?(d({taxonomy_0:e[0].query}),k(m,{title:s("Taxonomy - ","wp-document-revisions")+e[0].label,initialOpen:!1},[k(n,{type:"string",label:e[0].label,selected:c.term_0,options:f,onChange:function(a){d({term_0:parseInt(a)})}})])):1==a?(d({taxonomy_1:e[1].query}),k(m,{title:s("Taxonomy - ","wp-document-revisions")+e[1].label,initialOpen:!1},[k(n,{type:"string",label:e[1].label,selected:c.term_1,options:f,onChange:function(a){d({term_1:parseInt(a)})}})])):2==a?(d({taxonomy_2:e[2].query}),k(m,{title:s("Taxonomy - ","wp-document-revisions")+e[2].label,initialOpen:!1},[k(n,{type:"string",label:e[2].label,selected:c.term_1,options:f,onChange:function(a){d({term_2:parseInt(a)})}})])):void 0}const c=a.attributes,d=a.setAttributes;var e=wpdr_data.taxos;return k("div",{},[k(f,{block:"wp-document-revisions/documents-shortcode",attributes:c}),k(l,{},[function(){return 0==wpdr_data.stmax?k("p",{},s("There are no taxonomies defined.","wp-document-revisions")):1==wpdr_data.stmax?b(0):2==wpdr_data.stmax?[b(0),b(1)]:3<=wpdr_data.stmax?[b(0),b(1),b(2)]:void 0}(),k(m,{title:s("Display Settings","wp-document-revisions"),initialOpen:!1},[k(o,{value:c.numberposts,label:s("Number of documents to display","wp-document-revisions"),onChange:function(a){d({numberposts:parseInt(a)})},min:1,step:1}),k(p,{type:"string",value:c.orderby,label:s("List ordering Field","wp-document-revisions"),help:s("Example fields are post_title, post_date and post_modified.","wp-document-revisions"),onChange:function(a){d({orderby:a})}}),k(n,{type:"string",label:s("Order sequence"),selected:c.order,options:[{label:s("Ascending","wp-document-revisions"),value:"ASC"},{label:s("Descending","wp-document-revisions"),value:"DESC"}],onChange:function(a){d({order:a})}}),k(n,{type:"string",label:s("Show Edit link","wp-document-revisions"),help:s("Show Edit link allows the list to have a link to the Edit function. A choice made here will over-ride the system-configured settings. Links will only appear if the user can edit the document.","wp-document-revisions"),selected:c.show_edit,options:[{label:s("Default","wp-document-revisions"),value:""},{label:s("No Edit link","wp-document-revisions"),value:"0"},{label:s("Edit link","wp-document-revisions"),value:"1"}],onChange:function(a){d({show_edit:a})}}),k(r,{type:"boolean",checked:c.new_tab,label:s("Open documents in new tab?","wp-document-revisions"),help:s("Setting this on will open the document in a new tab. This should be set on whilst editing the page as clicking on a link whilst editing will force the current page to be left.","wp-document-revisions"),onChange:function(a){d({new_tab:a})}})]),k(m,{title:s("Free Form Settings","wp-document-revisions"),initialOpen:!1},[k(q,{type:"string",rows:8,value:c.freeform,label:s("Free-form parameters","wp-document-revisions"),help:s("The query parameters can be very extensive. enter any other parameters required here.","wp-document-revisions"),onChange:function(a){d({freeform:a})}})])])])},save(){return null},transforms:{from:[{type:"block",blocks:["core/shortcode"],isMatch:function({text:a}){return /^\[?documents\b\s*/.test(a)},transform:({text:a})=>{function b(a,b){var c=u[a].terms,d=b.replace(/_/g,"-");for(j=0,lenj=c.length;j<lenj;j++)if(b===c[j][2]||d===c[j][2])return c[j][0];return 0}var c="",d=0,e="",f=0,g="",k=0,l=5,m="",n="",o="",p=!0,q="",r=a.toLowerCase();0==r.indexOf("[")&&(r=r.slice(1,r.length-1));var s=r.split(" ");s.shift();var t,u=wpdr_data.taxos,v=wpdr_data.wf_efpp;for(t of s)if(0!==t.length){var w=!1,x=t.split("=");(0===x[1].indexOf("'")||0===x[1].indexOf("\""))&&(x[1]=x[1].slice(1,x[1].length-1)),"1"===v&&"workflow_state"===x[0]&&(x[0]="post_status"),0<wpdr_data.stmax&&x[0]===u[0].query&&(c=x[0],d=b(0,x[1]),w=!0),1<wpdr_data.stmax&&x[0]===u[1].query&&(e=x[0],f=b(1,x[1]),w=!0),2<wpdr_data.stmax&&x[0]===u[2].query&&(g=x[0],k=b(2,x[1]),w=!0),"number"===x[0]&&(l=+x[1],w=!0),"numberposts"===x[0]&&(l=+x[1],w=!0),"orderby"===x[0]&&(m=x[1],w=!0),"order"===x[0]&&(n=x[1].toUpperCase(),w=!0),"show_edit"===x[0]&&(o=x[1],w=!0),"new_tab"===x[0]&&("false"===x[1]&&(p=!1),w=!0),!1==w&&(q+=" "+t)}return h("wp-document-revisions/documents-shortcode",{taxonomy_0:c,term_0:d,taxonomy_1:e,term_1:f,taxonomy_2:g,term_2:k,numberposts:l,orderby:m,order:n,show_edit:o,new_tab:p,freeform:q.trim()})}}],to:[{type:"block",blocks:["core/shortcode"],transform:a=>{function b(a,b){var d=c[a].terms;for(j=0,lenj=d.length;j<lenj;j++)if(b===d[j][0])return"\""+d[j][2]+"\"";return"??"}var c=wpdr_data.taxos,d="[documents ";return""!==a.taxonomy_0&&0!=a.term_0&&(d+=" "+a.taxonomy_0+"="+b(0,a.term_0)),""!==a.taxonomy_1&&0!=a.term_1&&(d+=" "+a.taxonomy_1+"="+b(1,a.term_1)),""!==a.taxonomy_2&&0!=a.term_2&&(d+=" "+a.taxonomy_2+"="+b(2,a.term_2)),""!==a.numberposts&&(d+=" numberposts=\""+a.numberposts+"\""),void 0!==a.orderby&&""!==a.orderby&&(d+=" orderby=\""+a.orderby+"\""),""!==a.order&&void 0!==a.orderby&&""!==a.orderby&&(d+=" order=\""+a.order+"\""),""!==a.show_edit&&(d+=" show_edit=\""+a.show_edit+"\""),d+=a.new_tab?" new_tab=true":" new_tab=false",""!==a.freeform&&void 0!==a.freeform&&(d+=" "+a.freeform),d+=" ]",h("core/shortcode",{text:d})}}]}})})(window.wp.blocks,window.wp.element,window.wp.blockEditor,window.wp.components,window.wp.compose,window.wp.serverSideRender,window.wp.i18n);